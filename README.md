# å¾®ä¿¡å°ç¨‹åºæˆªå›¾æ§åˆ¶æ¼”ç¤º

è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ§åˆ¶æˆªå›¾å’Œå½•å±åŠŸèƒ½çš„ç¤ºä¾‹é¡¹ç›®ã€‚é€šè¿‡ä½¿ç”¨ `wx.setVisualEffectOnCapture` APIï¼Œå®ç°äº†å¯¹é¡µé¢æˆªå›¾å’Œå½•å±åŠŸèƒ½çš„ç²¾ç¡®æ§åˆ¶ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ¨ ä¸€é”®ç¦ç”¨/å¯ç”¨æˆªå›¾å’Œå½•å±åŠŸèƒ½
- ğŸ”„ å®æ—¶æ˜¾ç¤ºå½“å‰æˆªå›¾/å½•å±çŠ¶æ€
- ğŸ›¡ï¸ è‡ªåŠ¨ä¿æŠ¤ï¼šç¦»å¼€é¡µé¢æ—¶è‡ªåŠ¨æ¢å¤æˆªå›¾åŠŸèƒ½
- ğŸ“± æ”¯æŒ Skyline æ¸²æŸ“å¼•æ“
- ğŸ¨ ç¾è§‚çš„ç”¨æˆ·ç•Œé¢

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒAPI

é¡¹ç›®ä¸»è¦ä½¿ç”¨äº†å¾®ä¿¡å°ç¨‹åºçš„ `wx.setVisualEffectOnCapture` API æ¥å®ç°æˆªå›¾æ§åˆ¶ã€‚è¿™ä¸ª API å¯ä»¥è®¾ç½®æˆªå±/å½•å±æ—¶çš„è¡¨ç°ï¼Œæ”¯æŒä¸¤ä¸ªå‚æ•°ï¼š

- `visualEffect`: æˆªå±/å½•å±æ—¶çš„è¡¨ç°ï¼Œæ”¯æŒ `none`ï¼ˆæ­£å¸¸ï¼‰å’Œ `hidden`ï¼ˆéšè—ï¼‰
- `success/fail/complete`: å›è°ƒå‡½æ•°

### é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ app.js                 # åº”ç”¨ç¨‹åºå…¥å£ï¼ŒåŒ…å«å…¨å±€æ•°æ®
â”œâ”€â”€ app.json              # å…¨å±€é…ç½®æ–‡ä»¶
â”œâ”€â”€ app.wxss              # å…¨å±€æ ·å¼æ–‡ä»¶
â”œâ”€â”€ components/           # ç»„ä»¶ç›®å½•
â”‚   â””â”€â”€ navigation-bar/   # è‡ªå®šä¹‰å¯¼èˆªæ ç»„ä»¶
â”œâ”€â”€ pages/               # é¡µé¢ç›®å½•
â”‚   â””â”€â”€ index/          # ä¸»é¡µé¢
â”‚       â”œâ”€â”€ index.js    # é¡µé¢é€»è¾‘
â”‚       â”œâ”€â”€ index.json  # é¡µé¢é…ç½®
â”‚       â”œâ”€â”€ index.wxml  # é¡µé¢ç»“æ„
â”‚       â””â”€â”€ index.wxss  # é¡µé¢æ ·å¼
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### è®¾è®¡æ€è·¯

1. **çŠ¶æ€ç®¡ç†**
   - ä½¿ç”¨ `globalData` å­˜å‚¨æˆªå›¾ç¦ç”¨çŠ¶æ€
   - é€šè¿‡é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç®¡ç†çŠ¶æ€å˜åŒ–

2. **ç”¨æˆ·ç•Œé¢**
   - é‡‡ç”¨è‡ªå®šä¹‰å¯¼èˆªæ æä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ
   - ä½¿ç”¨ flex å¸ƒå±€å®ç°å“åº”å¼ç•Œé¢
   - æ¸…æ™°çš„çŠ¶æ€æç¤ºå’Œæ“ä½œæŒ‰é’®

3. **å®‰å…¨è€ƒè™‘**
   - é¡µé¢éšè—æ—¶è‡ªåŠ¨æ¢å¤æˆªå›¾åŠŸèƒ½
   - é¡µé¢å¸è½½æ—¶ç¡®ä¿æˆªå›¾åŠŸèƒ½è¢«é‡ç½®
   - çŠ¶æ€åŒæ­¥ç¡®ä¿åŠŸèƒ½æ­£å¸¸åˆ‡æ¢

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€é…ç½®

1. ç¡®ä¿é¡¹ç›®çš„ `app.json` ä¸­åŒ…å«å¿…è¦çš„é…ç½®ï¼š

```json
{
  "renderer": "skyline",
  "window": {
    "navigationStyle": "custom"
  }
}
```

2. åœ¨é¡µé¢çš„ json æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š

```json
{
  "navigationStyle": "custom",
  "usingComponents": {
    "navigation-bar": "/components/navigation-bar/navigation-bar"
  }
}
```

### åŠŸèƒ½ä½¿ç”¨

1. **ç¦ç”¨æˆªå›¾/å½•å±**
   - ç‚¹å‡»"ç¦ç”¨æˆªå›¾å’Œå½•å±"æŒ‰é’®
   - çŠ¶æ€æ–‡æœ¬ä¼šæ›´æ–°ä¸º"æˆªå›¾å’Œå½•å±åŠŸèƒ½å·²ç¦ç”¨"
   - æ­¤æ—¶æ— æ³•å¯¹é¡µé¢è¿›è¡Œæˆªå›¾æˆ–å½•å±

2. **å¯ç”¨æˆªå›¾/å½•å±**
   - ç‚¹å‡»"å¯ç”¨æˆªå›¾å’Œå½•å±"æŒ‰é’®
   - çŠ¶æ€æ–‡æœ¬ä¼šæ›´æ–°ä¸º"æˆªå›¾å’Œå½•å±åŠŸèƒ½å·²å¯ç”¨"
   - å¯ä»¥æ­£å¸¸æˆªå›¾æˆ–å½•å±

3. **è‡ªåŠ¨ä¿æŠ¤**
   - å½“ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶ï¼Œæˆªå›¾åŠŸèƒ½ä¼šè‡ªåŠ¨æ¢å¤
   - å½“å°ç¨‹åºé€€å‡ºæ—¶ï¼Œæˆªå›¾åŠŸèƒ½ä¼šè‡ªåŠ¨æ¢å¤

## API ç¤ºä¾‹

```javascript
// ç¦ç”¨æˆªå›¾å’Œå½•å±
wx.setVisualEffectOnCapture({
  visualEffect: 'hidden',
  success: () => {
    // å¤„ç†æˆåŠŸ
  },
  fail: (error) => {
    // å¤„ç†é”™è¯¯
  }
});

// å¯ç”¨æˆªå›¾å’Œå½•å±
wx.setVisualEffectOnCapture({
  visualEffect: 'none',
  success: () => {
    // å¤„ç†æˆåŠŸ
  },
  fail: (error) => {
    // å¤„ç†é”™è¯¯
  }
});
```

## æ³¨æ„äº‹é¡¹

1. **å…¼å®¹æ€§**
   - éœ€è¦åŸºç¡€åº“ 2.11.0 æˆ–æ›´é«˜ç‰ˆæœ¬
   - éœ€è¦å¼€å¯ Skyline æ¸²æŸ“å¼•æ“
   - ä»…æ”¯æŒ iOS å’Œ Android å®¢æˆ·ç«¯

2. **ç”Ÿå‘½å‘¨æœŸ**
   - é¡µé¢éšè—æ—¶ä¼šè‡ªåŠ¨æ¢å¤æˆªå›¾åŠŸèƒ½
   - å»ºè®®åœ¨é¡µé¢å¸è½½æ—¶æ‰‹åŠ¨æ¢å¤æˆªå›¾åŠŸèƒ½

3. **æ€§èƒ½è€ƒè™‘**
   - API è°ƒç”¨ä¼šç•¥å¾®å½±å“æ€§èƒ½
   - å»ºè®®é¿å…é¢‘ç¹åˆ‡æ¢çŠ¶æ€

## å¼€å‘ç¯å¢ƒ

- å¾®ä¿¡å¼€å‘è€…å·¥å…· 1.06.2412050
- åŸºç¡€åº“ç‰ˆæœ¬ 3.8.6
- å¼€å‘ç¯å¢ƒ Windows

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼å¦‚æœä½ æƒ³è´¡çŒ®ä»£ç ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„æ”¹åŠ¨ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦ç»†ä¿¡æ¯

## å‚è€ƒèµ„æ–™

- [å¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ - wx.setVisualEffectOnCapture](https://developers.weixin.qq.com/miniprogram/dev/api/device/screen/wx.setVisualEffectOnCapture.html)
- [å¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ - Skyline æ¸²æŸ“å¼•æ“](https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/introduction.html)